{%  extends 'base.html' %}
{% load static %}
{% block title %} 
Edit Profile Page
{% endblock %}


{% block content %}
</br>
</br>
{% if user.is_authenticated %}
  
    {% if user.id == profile.user.id %}
    <div class="form-control">

        <h1 class=" text-center font-weight-light">Edit Profile Page</h1>

        <form method="POST" enctype="multipart/form-data">
        <div class="row">
                <div class="small-12 col align-items-center">
                    <div class="circle">
                        <img src="{% static 'upload/author.jpg' %}" alt="" width="100px" class="rounded-circle" class="profile_pic upload-button ">
                    </div>
                </div>
            </div>

        {% csrf_token %} 
        {{ form.as_p }}
        {{ form.media }}
        <button class="btn btn-secondary " >Update Profile Page</button>    
        </form>

    </br>
    </br>
    </br>
    </br>
    </br>


    </div>

    {% else %}
        </br>
        <center>
         <h2>SOMETHING WENT WRONG!!!</h2> 
        </center>   
    {% endif %}

{% else %}
        </br>
        <center>
         <h2>SOMETHING WENT WRONG!!!!</h2> 
        </center>   
{% endif %}

<script type="text/javascript" src="{% static 'js/jquery.min.js' %}">

    $(document).ready(function(){
        var readURL = function(input){
            if (input.files && input.files[0]){
                var reader = new FileReader();
                reader.onload = function(e){
                    $('.profile_pic').attr('src',e.target.result);
                }
                reader.readAsDataURL(input.files[0]);
            } 
        }
        $(".file-upload").on('change', function(){
            readURL(this);
        });

        $(".upload-button").on('click', function(){
            $(".file-upload").click();

        });
    });
</script>

{% endblock %}

